<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GIF Battle - Play</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="game-container">
        <!-- Header -->
        <header class="game-header">
            <div class="round-info">
                <span id="round-display">Waiting to start...</span>
            </div>
            <div class="timer" id="timer"></div>
            <button class="exit-btn" id="exit-game-btn">Exit Game</button>
        </header>
        
        <!-- Players List -->
        <aside class="players-sidebar">
            <h3>Players</h3>
            <div id="players-list"></div>
        </aside>
        
        <!-- Main Game Area -->
        <main class="game-main">
            <!-- Waiting Phase -->
            <div id="waiting-phase" class="phase-screen">
                <h2>Waiting for players...</h2>
                <p>Game Master can start the game when ready</p>
                <div id="gm-settings" style="display: none; margin: 20px 0;">
                    <label for="round-count" style="font-weight: 600; margin-right: 10px;">Number of Rounds:</label>
                    <select id="round-count" style="padding: 10px 15px; font-size: 16px; border-radius: 8px; border: 2px solid #e0e0e0;">
                        <option value="3">3 rounds</option>
                        <option value="5">5 rounds</option>
                        <option value="10" selected>10 rounds</option>
                        <option value="15">15 rounds</option>
                        <option value="20">20 rounds</option>
                    </select>
                </div>
                <button id="start-game-btn" class="btn-primary" style="display: none;">Start Game</button>
            </div>
            
            <!-- Prompt Phase (GM only) -->
            <div id="prompt-phase" class="phase-screen" style="display: none;">
                <h2>Round <span id="prompt-round"></span>: Write a Prompt</h2>
                <p>As the Game Master, write a statement or scenario for players to respond with a GIF:</p>
                <textarea id="prompt-input" placeholder="e.g., 'When you realize it's Monday tomorrow...'" maxlength="200"></textarea>
                <button id="submit-prompt-btn" class="btn-primary">Submit Prompt</button>
            </div>
            
            <!-- GIF Submission Phase -->
            <div id="submitting-phase" class="phase-screen" style="display: none;">
                <h2 id="submitting-prompt-display"></h2>
                <p class="phase-description">Search for the perfect GIF to respond!</p>
                
                <div class="gif-search-container">
                    <div class="search-box">
                        <input type="text" id="gif-search-input" placeholder="Start typing to search for GIFs..." autocomplete="off">
                    </div>
                    
                    <div class="gif-results" id="gif-results">
                        <p class="gif-hint">Type something and search to find GIFs!</p>
                    </div>
                    
                    <div class="selected-gif-container" id="selected-gif-container" style="display: none;">
                        <h4>Your Selection:</h4>
                        <img id="selected-gif-preview" src="" alt="Selected GIF">
                        <button id="submit-gif-btn" class="btn-primary" style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); font-size: 1.2em; padding: 15px 30px;">‚úì Submit This GIF</button>
                        <button id="clear-selection-btn" class="btn-secondary">Choose Different</button>
                    </div>
                </div>
                
                <div class="submission-status" id="submission-status"></div>
            </div>
            
            <!-- Voting Phase -->
            <div id="voting-phase" class="phase-screen" style="display: none;">
                <h2 id="voting-prompt-display" style="color: #667eea; font-style: italic; margin-bottom: 10px;"></h2>
                <h3>Vote for Your Favorite GIF!</h3>
                <p class="phase-description">Click on a GIF to vote for it</p>
                <div class="gifs-grid" id="gifs-grid"></div>
            </div>
            
            <!-- Results Phase -->
            <div id="results-phase" class="phase-screen" style="display: none;">
                <h2>Round Results</h2>
                <div id="results-display"></div>
                <div id="gm-results-buttons" style="display: none; margin-top: 20px;">
                    <button id="start-commenting-btn" class="btn-primary">üí¨ Let Players Comment</button>
                    <button id="next-round-btn" class="btn-secondary" style="margin-left: 10px;">Skip ‚Üí Next Round</button>
                </div>
            </div>
            
            <!-- Commenting Phase -->
            <div id="commenting-phase" class="phase-screen" style="display: none;">
                <h2>üí¨ Comment Time!</h2>
                <p class="phase-description">Share your thoughts on the GIFs!</p>
                
                <div id="comments-container" style="display: flex; gap: 30px; flex-wrap: wrap; justify-content: center; margin-bottom: 20px;">
                    <!-- Vote Comment Section -->
                    <div id="vote-comment-section" style="flex: 1; min-width: 280px; max-width: 400px;">
                        <h3 style="color: #667eea; margin-bottom: 10px;">üó≥Ô∏è GIF You Voted For</h3>
                        <div id="your-voted-gif" style="text-align: center; margin-bottom: 15px;"></div>
                        <textarea id="vote-comment-input" placeholder="I voted for this GIF because..." maxlength="200" style="width: 100%; min-height: 80px; padding: 12px; border-radius: 10px; border: 2px solid #e0e0e0; font-size: 14px; resize: vertical;"></textarea>
                    </div>
                    
                    <!-- Own GIF Comment Section -->
                    <div id="own-comment-section" style="flex: 1; min-width: 280px; max-width: 400px;">
                        <h3 style="color: #ffa500; margin-bottom: 10px;">‚≠ê Your Own GIF</h3>
                        <div id="your-own-gif" style="text-align: center; margin-bottom: 15px;"></div>
                        <textarea id="own-comment-input" placeholder="I chose this GIF because..." maxlength="200" style="width: 100%; min-height: 80px; padding: 12px; border-radius: 10px; border: 2px solid #e0e0e0; font-size: 14px; resize: vertical;"></textarea>
                    </div>
                </div>
                
                <div id="comment-input-area" style="margin-top: 20px; text-align: center;">
                    <button id="submit-comment-btn" class="btn-primary">Submit Comments</button>
                </div>
                <div class="submission-status" id="comment-status"></div>
            </div>
            
            <!-- Game Ended -->
            <div id="ended-phase" class="phase-screen" style="display: none;">
                <h2>üèÜ Game Over!</h2>
                <div id="winner-display"></div>
                <div id="final-leaderboard"></div>
                <button class="btn-primary" id="play-again-btn">Back to Lobby</button>
            </div>
        </main>
        
        <!-- Leaderboard -->
        <aside class="leaderboard-sidebar">
            <h3>Leaderboard</h3>
            <div id="leaderboard"></div>
        </aside>
    </div>
    
    <script src="/socket.io/socket.io.js"></script>
    <script src="client.js"></script>
</body>
</html>
